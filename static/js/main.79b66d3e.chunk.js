(this["webpackJsonpsearch-unsplash"]=this["webpackJsonpsearch-unsplash"]||[]).push([[0],{109:function(e,t,r){},135:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(9),a=r.n(c),o=(r(109),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,178)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),a(e),o(e)}))}),i=r(11),s=r(71),u=r(15),l=function(e){return e.search.photos},h=function(e){return e.search.query},j=function(e){return e.search.isLoading},b=function(e){return e.search.currentPage},d=function(e){return e.search.totalPhotosCount},O=function(e){return e.search.pageSize},p=function(e){return e.search.orderBy},f=function(e){return e.search.colors},_=function(e){return e.search.isAuth},g=function(e){return e.search.token},x=r(51),m=r.n(x),v=r(72),S=r(19),y=r(47),P=r.n(y),k="-7Zizqlf3Gfd2aWnELKsllUey2-0cIwnZc60S7IKbjw",C=P.a.create({headers:{Authorization:"Client-ID ".concat(k)},baseURL:"https://api.unsplash.com/"}),T=P.a.create({headers:{Authorization:"Bearer ACCESS_TOKEN"},baseURL:"https://unsplash.com/"}),E=function(e,t,r,n,c){return C.get("search/photos?query=".concat(e,"&page=").concat(t,"&per_page=").concat(r,"&order_by=").concat(n)+(null===c?"":"&color=".concat(c))).then((function(e){return e.data}))},N=function(e){return T.post("oauth/token?client_id=".concat(k,"&client_secret=").concat("6vSgY3FPGUOI4jKvg1FldeTP_eR-KHGiVB7ILALA_YA","&redirect_uri=").concat("http://localhost:3000/authcallback","&code=").concat(e,"&grant_type=").concat("authorization_code"))},L={token:null,isAuth:!1,photos:[],isLoading:!1,query:"",totalPhotosCount:0,pageSize:36,currentPage:1,orderBy:"relevant",colors:null},A=function(e){return{type:"auth/AUTH_RECEIVED",token:e}},w=function(e){return{type:"auth/SET_IS_AUTH",isAuth:e}},I=function(e){return{type:"search/SET_PHOTOS",photos:e}},q=function(e){return{type:"search/SET_QUERY",query:e}},H=function(e){return{type:"search/TOOGLE_IS_LOADING",isLoading:e}},U=function(e){return{type:"search/SET_TOTAL_PHOTOS_COUNT",totalPhotosCount:e}},B=function(e){return{type:"searhc/SET_CURRNT_PAGE",currentPage:e}},R=function(e,t,r){return{type:"search/CHANGE_LIKES_PHOTO",id:e,likes:t,isLiked:r}},z=function(e,t,r,n,c){return function(){var a=Object(v.a)(m.a.mark((function a(o){var i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return H(!0),o(q(e)),o(B(t)),a.next=5,E(e,t,r,n,c);case 5:i=a.sent,H(!1),o(I(i.results)),o(U(i.total));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/AUTH_RECEIVED":return Object(S.a)(Object(S.a)({},e),{},{token:t.token});case"auth/SET_IS_AUTH":return Object(S.a)(Object(S.a)({},e),{},{isAuth:t.isAuth});case"search/SET_QUERY":return Object(S.a)(Object(S.a)({},e),{},{query:t.query});case"search/SET_PHOTOS":return Object(S.a)(Object(S.a)({},e),{},{photos:t.photos});case"search/TOOGLE_IS_LOADING":return Object(S.a)(Object(S.a)({},e),{},{isLoading:t.isLoading});case"search/SET_TOTAL_PHOTOS_COUNT":return Object(S.a)(Object(S.a)({},e),{},{totalPhotosCount:t.totalPhotosCount});case"searhc/SET_CURRNT_PAGE":return Object(S.a)(Object(S.a)({},e),{},{currentPage:t.currentPage});case"search/CHANGE_LIKES_PHOTO":return Object(S.a)(Object(S.a)({},e),{},{photos:e.photos.map((function(e){return e.id===t.id&&(e.likes=t.likes,e.liked_by_user=t.isLiked),e}))});default:return e}},G=r(2),K=function(){var e=Object(u.c)(g),t=Object(i.f)().search.substr(6),r=Object(u.b)();return Object(n.useEffect)((function(){r(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:200===(n=t.sent).status&&(r(A(n.data.access_token)),r(w(!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]),e?Object(G.jsx)(i.a,{to:"sercher"}):Object(G.jsx)("div",{children:"Loading..."})},D=r(96),V=r(61),J=r(63),W=r(28),Y=r.n(W),M=r(165),Z=r(176),Q=r(174),X=r(167),$=r(162),ee=r(175),te=Object($.a)((function(e){return Object(ee.a)({formControl:{margin:e.spacing(1),minWidth:300},selectEmpty:{marginTop:e.spacing(2)}})})),re=function(e){var t={};return e.query?e.query.length>20&&(t.query="Please, dont write more then 20 sumbols"):t.query="Required - EMPTY SEARCH VALUE",t},ne=function(e){var t=e.searchPhotos,r=te(),c=Object(n.useState)([]),a=Object(V.a)(c,2),o=a[0],i=a[1];o.length>5&&o.shift();var s=JSON.parse(localStorage.getItem("query"));return Object(G.jsx)(J.c,{initialValues:{query:"",color:null,orderBy:"relevant"},validate:re,onSubmit:function(e,r){var n=r.setSubmitting;t(e.query,e.orderBy,e.color),n(!1),i((function(t){return[].concat(Object(D.a)(t),[e.query])}));var c=o.filter((function(e,t){return o.indexOf(e)===t}));localStorage.setItem("query",JSON.stringify(c))},children:function(e){var t=e.values,n=e.handleChange,c=e.handleBlur,a=e.handleSubmit,o=e.isSubmitting,i=e.isValid,u=e.errors;return Object(G.jsxs)(J.b,{onSubmit:a,children:[Object(G.jsxs)("div",{className:Y.a.inputSerch_error,children:[" ",u.query]}),Object(G.jsx)(J.a,{placeholder:"Search...",list:"query",type:"text",name:"query",onChange:n,onBlur:c,autocomplete:"off",value:t.query,className:Y.a.inputSerch}),Object(G.jsx)("datalist",{id:"query",children:s&&s.map((function(e){return Object(G.jsx)("option",{value:e})}))}),Object(G.jsxs)("div",{className:Y.a.selectFormControls,children:[Object(G.jsxs)(M.a,{className:r.formControl,children:[Object(G.jsx)(Z.a,{htmlFor:"orderBy",children:"Sort by order"}),Object(G.jsxs)(Q.a,{native:!0,id:"orderBy",name:"orderBy",onChange:n,value:t.orderBy,children:[Object(G.jsx)("option",{value:"relevant",children:"Relevant"}),Object(G.jsx)("option",{value:"latest ",children:"Latest"})]})]}),Object(G.jsxs)(M.a,{className:r.formControl,children:[Object(G.jsx)(Z.a,{htmlFor:"color",children:"Sort by color"}),Object(G.jsxs)(Q.a,{native:!0,id:"color",name:"color",onChange:n,value:t.color,children:[Object(G.jsx)("option",{value:"black_and_white",children:"black and white"}),Object(G.jsx)("option",{value:"black ",children:"black"}),Object(G.jsx)("option",{value:"white",children:"white"}),Object(G.jsx)("option",{value:"yellow ",children:"yellow"}),Object(G.jsx)("option",{value:"orange",children:"orange"}),Object(G.jsx)("option",{value:"red ",children:"red"}),Object(G.jsx)("option",{value:"purple",children:"purple"}),Object(G.jsx)("option",{value:"magenta ",children:"magenta"}),Object(G.jsx)("option",{value:"green ",children:"green"}),Object(G.jsx)("option",{value:"teal",children:"teal"}),Object(G.jsx)("option",{value:"blue ",children:"blue"})]})]})]}),Object(G.jsx)("div",{className:Y.a.buttonSearch,children:Object(G.jsx)(X.a,{variant:"contained",color:"default",type:"submit",disabled:!i||o,children:"Search"})})]})}})},ce=r(40),ae=r(60),oe=r.n(ae),ie=r(168),se=r(94),ue=r.n(se),le=r(169),he=r(62),je=r.n(he),be=r(92),de=r.n(be),Oe=r(93),pe=r.n(Oe),fe=function(e){for(var t=e.totalPhotosCount,r=e.pageSize,c=e.currentPage,a=e.onPageChanged,o=e.portionSize,i=void 0===o?10:o,s=Math.ceil(t/r),u=[],l=1;l<=s;l++)u.push(l);var h=Math.ceil(s/i),j=Object(n.useState)(1),b=Object(V.a)(j,2),d=b[0],O=b[1],p=(d-1)*i+1,f=d*i;return Object(G.jsxs)("div",{className:je.a.paginator,children:[d>1&&Object(G.jsx)("button",{onClick:function(){O(d-1)},children:Object(G.jsx)(de.a,{})}),u.filter((function(e){return e>=p&&e<=f})).map((function(e){return Object(G.jsxs)("span",{className:oe()(Object(ce.a)({},je.a.activePage,c===e),je.a.pageNumber),onClick:function(t){a(e)},children:[e," "]},e)})),d<h&&Object(G.jsx)("button",{onClick:function(){O(d+1)},children:Object(G.jsx)(pe.a,{})})]})},_e=function(e){var t=e.pageSize,r=e.totalPhotosCount,n=e.currentRage,c=Object(u.b)(),a=Object(u.c)(h),o=Object(u.c)(f),i=Object(u.c)(p),s=Object(u.c)(g),j=Object(u.c)(l),b=Object(u.c)(_),d=P.a.create({headers:{Authorization:"Bearer ".concat(s)},baseURL:"https://api.unsplash.com/"});return Object(G.jsxs)("div",{children:[Object(G.jsx)(fe,{totalPhotosCount:r,pageSize:t,currentPage:n,onPageChanged:function(e){c(z(a,e,t,i,o))}}),Object(G.jsx)(ie.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start",spacing:2,children:j&&j.map((function(e){return Object(G.jsxs)(ie.a,{item:!0,className:Y.a.grid_item_photo,children:[Object(G.jsx)("img",{src:e.urls.small,alt:e.description}),b&&Object(G.jsxs)("div",{className:Y.a.like_area,onClick:function(){var t;e.liked_by_user?function(e){d.delete("photos/".concat(e,"/like/")).then((function(e){c(R(e.data.photo.id,e.data.photo.likes,e.data.photo.liked_by_user))}))}(e.id):(t=e.id,d.post("photos/".concat(t,"/like/")).then((function(e){c(R(e.data.photo.id,e.data.photo.likes,e.data.photo.liked_by_user))})))},children:[Object(G.jsx)(le.a,{"aria-label":"add to favorites",children:Object(G.jsx)(ue.a,{className:oe()(Object(ce.a)({},Y.a.activeHeart,e.liked_by_user),Y.a.commonHeart)})}),e.likes]})]},e.id)}))})]})},ge=r(170),xe=r(171),me=r(172),ve=r(173),Se=Object($.a)((function(e){return Object(ee.a)({root:{flexGrow:1},title:{flexGrow:1},searchForm:{marginTop:e.spacing(3)},appBar:{backgroundColor:"white"},toolbar:{color:"black"}})})),ye=function(){var e=Se(),t=Object(u.c)(j),r=Object(u.c)(d),n=Object(u.c)(b),c=Object(u.c)(O),a=Object(u.c)(_),o=Object(u.b)();return t?Object(G.jsx)("div",{children:"Is loading..."}):Object(G.jsxs)("div",{children:[Object(G.jsx)(ge.a,{position:"static",className:e.appBar,children:Object(G.jsxs)(xe.a,{className:e.toolbar,children:[Object(G.jsx)(me.a,{variant:"h6",className:e.title,children:"Searcher Unsplash"}),a?Object(G.jsx)(X.a,{color:"inherit",children:"Log out"}):Object(G.jsxs)(X.a,{color:"inherit",children:[" ",Object(G.jsx)("a",{href:"https://unsplash.com/oauth/authorize?client_id=-7Zizqlf3Gfd2aWnELKsllUey2-0cIwnZc60S7IKbjw&redirect_uri=http://localhost:3000/authcallback&response_type=code&scope=public+read_user+write_likes",children:"Login"}),"   "]})]})}),Object(G.jsx)(ve.a,{maxWidth:"md",className:e.searchForm,children:Object(G.jsx)(ne,{searchPhotos:function(e,t,r){o(z(e,1,c,t,r))}})}),Object(G.jsx)(ve.a,{maxWidth:"lg",children:Object(G.jsx)(_e,{totalPhotosCount:r,currentRage:n,pageSize:c})})]})},Pe=r(64),ke=r(95),Ce=Object(Pe.b)({search:F}),Te=Object(Pe.c)(Ce,Object(Pe.a)(ke.a)),Ee=Object(i.g)((function(){return Object(G.jsxs)("div",{children:[Object(G.jsx)(i.b,{exact:!0,path:"/",render:function(){return Object(G.jsx)(i.a,{to:"/sercher"})}}),Object(G.jsx)(i.b,{path:"/sercher",render:function(){return Object(G.jsx)(ye,{})}}),Object(G.jsx)(i.b,{path:"/authcallback",render:function(){return Object(G.jsx)(K,{})}})]})})),Ne=function(){return Object(G.jsx)(Ee,{})},Le=function(){return Object(G.jsx)(s.a,{basename:"/photosSearcher",children:Object(G.jsx)(u.a,{store:Te,children:Object(G.jsx)(Ne,{})})})};a.a.render(Object(G.jsx)(Le,{}),document.getElementById("root")),o()},28:function(e,t,r){e.exports={inputSerch:"SearchPage_inputSerch__jsPxD",inputSerch_error:"SearchPage_inputSerch_error__1cdk4",selectFormControls:"SearchPage_selectFormControls__26Qdv",buttonSearch:"SearchPage_buttonSearch__1FXok",grid_item_photo:"SearchPage_grid_item_photo__3wfI_",like_area:"SearchPage_like_area__2kMch",activeHeart:"SearchPage_activeHeart__3oCCN"}},62:function(e,t,r){e.exports={paginator:"Paginator_paginator__3P1cJ",pageNumber:"Paginator_pageNumber__2O1VT",activePage:"Paginator_activePage__2pxDw"}}},[[135,1,2]]]);
//# sourceMappingURL=main.79b66d3e.chunk.js.map